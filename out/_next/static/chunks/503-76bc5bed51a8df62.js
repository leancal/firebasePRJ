"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{8503:function(e,s,a){a.r(s),a.d(s,{default:function(){return Admin}});var t=a(5893),c=a(7294),n=a(947),r=a(1110),l=a(8918),components_Alert=e=>{let{message:s,onClose:a}=e;return(0,t.jsxs)("div",{className:"alert alert-danger",children:[(0,t.jsx)("button",{type:"button",className:"btn-close",onClick:a}),s]})},o=a(1163),i=a(1676);(0,l.ad)(n.ZP);var AdminPanel_Home=()=>{let e=(0,o.useRouter)(),{currentUser:s}=(0,r.aC)(),[a,d]=(0,c.useState)(!1),[u,h]=(0,c.useState)(!1),[m,x]=(0,c.useState)([]),[p,g]=(0,c.useState)("All"),[j,N]=(0,c.useState)(new Set),[_,b]=(0,c.useState)(""),toggleCategory=e=>{let s=new Set(j);s.has(e)?s.delete(e):s.add(e),N(s)};function mapCategoryToName(e){switch(e){case"1":return"Audio";case"2":return"Inform\xe1tica";case"3":return"Hogar";case"4":case"110":return"Discontinuos";case"5":return"Headsets";case"6":return"Cooks";case"101":return"Parlantes";case"102":return"Torres de sonido";case"103":return"Auriculares In‑ear";case"104":return"Auriculares On‑ear";case"105":return"Portable";case"106":return"Tablets";case"107":return"Notebooks";case"108":return"TV";case"111":return"Barras de Sonido";default:return"All"}}return((0,c.useEffect)(()=>{let fetchData=async()=>{let e=(0,l.ad)(n.ZP),s=[];for(let a of["audio","headsets","notebooks","tablets","cooks"]){let t=(0,l.hJ)(e,a);try{let e=await (0,l.PL)(t),a=e.docs.map(e=>({id:e.id,...e.data()}));s.push(...a)}catch(e){console.error("Error fetching products from ".concat(a,": "),e)}}x(s)};fetchData()},[]),a)?(0,t.jsx)(AdminPanel_UserAuth,{}):(0,t.jsxs)("div",{className:"mt-4 p-5 bg-primary text-white rounded center",children:[u&&(0,t.jsx)(components_Alert,{message:"El producto ya existe. Por favor, elija un nombre de producto \xfanico.",onClose:()=>h(!1)}),(0,t.jsxs)("div",{className:"app-container",children:[(0,t.jsxs)("div",{className:"sidebar",children:[(0,t.jsx)("div",{className:"sidebar-header"}),(0,t.jsxs)("ul",{className:"sidebar-list",children:[(0,t.jsx)("li",{className:"sidebar-list-item active",children:(0,t.jsxs)("a",{href:"#",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-shopping-bag",children:[(0,t.jsx)("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),(0,t.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,t.jsx)("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),(0,t.jsx)("span",{children:"Productos"})]})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(i.Z.Group,{className:"mb-3",children:(0,t.jsx)(i.Z.Control,{className:"form-title",style:{color:"black"},type:"text",placeholder:"Buscar por Nombre o SKU",value:_,onChange:e=>b(e.target.value)})})})}),(0,t.jsx)("li",{children:(0,t.jsx)("label",{children:(0,t.jsx)(i.Z.Check,{className:"form-title",type:"checkbox",label:"Headsets",name:"Headsets",checked:j.has("Headsets"),onChange:()=>toggleCategory("Headsets")})})}),(0,t.jsx)("li",{children:(0,t.jsx)("label",{children:(0,t.jsx)(i.Z.Check,{className:"form-title",type:"checkbox",label:"Audio",name:"Audio",checked:j.has("Audio"),onChange:()=>toggleCategory("Audio")})})}),(0,t.jsx)("li",{children:(0,t.jsx)("label",{children:(0,t.jsx)(i.Z.Check,{className:"form-title",type:"checkbox",label:"Inform\xe1tica",name:"Inform\xe1tica",checked:j.has("Inform\xe1tica"),onChange:()=>toggleCategory("Inform\xe1tica")})})}),(0,t.jsx)("li",{children:(0,t.jsx)("label",{children:(0,t.jsx)(i.Z.Check,{className:"form-title",type:"checkbox",label:"Cooks",name:"Cooks",checked:j.has("Cooks"),onChange:()=>toggleCategory("Cooks")})})}),(0,t.jsx)("li",{children:(0,t.jsx)("label",{children:(0,t.jsx)(i.Z.Check,{className:"form-title",type:"checkbox",label:"Discontinuos",name:"Discontinuos",checked:j.has("Discontinuos"),onChange:()=>toggleCategory("Discontinuos")})})})]}),(0,t.jsxs)("div",{className:"account-info",children:[(0,t.jsx)("div",{className:"account-info-picture"}),(0,t.jsxs)("div",{className:"account-info-name",children:["User",(0,t.jsx)("h4",{children:s?s.email.split("@")[0]:"Not logged in"})]}),(0,t.jsx)("button",{className:"account-info-more",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-more-horizontal",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1"})]})})]})]}),(0,t.jsxs)("div",{className:"app-content",children:[(0,t.jsxs)("div",{className:"app-content-header",children:[(0,t.jsx)("h1",{className:"app-content-headerText",children:"Productos"}),(0,t.jsx)("button",{className:"app-content-headerButton",onClick:()=>{e.push("/editProduct")},children:"Editar Productos"}),(0,t.jsx)("button",{className:"app-content-headerButton",onClick:()=>{e.push("/newProducts")},children:"A\xf1adir Producto"}),(0,t.jsx)("button",{onClick:()=>{n.I8.signOut().then(()=>{d(!0)})},variant:"danger",className:"app-content-headerButton",children:"Logout"})]}),(0,t.jsx)("div",{className:"app-content-actions"}),(0,t.jsxs)("div",{className:"products-area-wrapper tableView",children:[(0,t.jsxs)("div",{className:"products-header",children:[(0,t.jsx)("div",{className:"product-cell image",children:"Productos"}),(0,t.jsx)("div",{className:"product-cell category",children:"Categoria"}),(0,t.jsx)("div",{className:"product-cell status-cell",children:"Sku"})]}),m.filter(e=>{let s=mapCategoryToName(e.categories),a=e.name.toLowerCase(),t=e.sku.toLowerCase(),c=_.toLowerCase();return(0===j.size||j.has(s))&&(a.includes(c)||t.includes(c))}).map(e=>(0,t.jsxs)("div",{className:"products-row",children:[(0,t.jsxs)("div",{className:"product-cell name",children:[e.imgs&&e.imgs.length>0?(0,t.jsx)("img",{src:e.imgs[0],alt:"Product"}):null,e.name]}),(0,t.jsxs)("div",{className:"product-cell category",children:[(0,t.jsx)("span",{className:"cell-label",children:"Categoria:"}),mapCategoryToName(e.categories)]}),(0,t.jsxs)("div",{className:"product-cell status-cell",children:[(0,t.jsx)("span",{className:"cell-label",children:"Sku:"}),(0,t.jsx)("span",{className:"status ".concat(e.status?e.status.toLowerCase():""),children:e.sku})]})]},e.id))]})]})]})]})},AdminPanel_UserAuth=()=>{let[e,s]=(0,c.useState)({email:"",password:""}),{email:a,password:r}=e,[l,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=n.I8.currentUser;e&&o(!0);let s=setTimeout(()=>{n.I8.signOut(),localStorage.removeItem("authState"),o(!1)},6e5);return()=>{clearTimeout(s)}},[]);let changeHandler=a=>{s({...e,[a.target.name]:a.target.value})};return l?(0,t.jsx)(AdminPanel_Home,{}):(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"screen",children:[(0,t.jsx)("div",{className:"screen__content",children:(0,t.jsxs)("form",{className:"login",autoComplete:"off",children:[(0,t.jsxs)("div",{className:"login__field",children:[(0,t.jsx)("i",{className:"login__icon fas fa-user"}),(0,t.jsx)("input",{type:"text",className:"login__input",placeholder:"User name / Email",name:"email",value:a,onChange:changeHandler})]}),(0,t.jsxs)("div",{className:"login__field",children:[(0,t.jsx)("i",{className:"login__icon fas fa-lock"}),(0,t.jsx)("input",{type:"password",className:"login__input",placeholder:"Password",name:"password",value:r,onChange:changeHandler})]}),(0,t.jsxs)("button",{className:"button login__submit",onClick:e=>{e.preventDefault(),n.I8.signInWithEmailAndPassword(a,r).then(()=>{o(!0),localStorage.setItem("authState","authenticated")}).catch(e=>alert("Credenciales inv\xe1lidas"))},children:[(0,t.jsx)("span",{className:"button__text",children:"Log In Now"}),(0,t.jsx)("i",{className:"button__icon fas fa-chevron-right"})]})]})}),(0,t.jsxs)("div",{className:"screen__background",children:[(0,t.jsx)("span",{className:"screen__background__shape screen__background__shape4"}),(0,t.jsx)("span",{className:"screen__background__shape screen__background__shape3"}),(0,t.jsx)("span",{className:"screen__background__shape screen__background__shape2"}),(0,t.jsx)("span",{className:"screen__background__shape screen__background__shape1"})]})]})})};function Admin(){return(0,t.jsx)(AdminPanel_UserAuth,{})}}}]);