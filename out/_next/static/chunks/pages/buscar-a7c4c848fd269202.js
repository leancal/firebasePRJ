(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{8210:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/buscar",function(){return n(4318)}])},2297:function(e,s,n){"use strict";n.d(s,{Z:function(){return ProductCard}});var l=n(5893),t=n(2961),a=n(7036),o=n(594),i=n(4048),r=n(3094),c=n(3441),u=n(2656),d=n(5111);n(1163);var h=n(7294),f=n(7056),p=n(3652),x=n(5675),m=n.n(x),g=n(1664),j=n.n(g);function ProductCard(e){let{product:s,showName:n,showSku:x,showDesc:g,showButton:k,showGen:b,showTags:C,showDownload:S,showMenu:N,showViewing:w}=e,{sku:Z,name:v,link:T,imgs:y,shortDesc:_,longDesc:E,secondCategories:P,downloads:D,features:M,buyLink:z,collections:A}=s||{},[O,V]=(0,h.useState)(null),B=!!O;function toggleMenu(e){B?V(null):V(e.currentTarget)}return(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsxs)("div",{className:"product-card",children:[w&&(0,l.jsx)(t.Z,{}),(0,l.jsx)(j(),{href:s.link||"#",children:(0,l.jsx)("div",{className:"image",children:(0,l.jsx)(m(),{width:"150",height:"150",src:s.imgs[0],alt:s.name,placeholder:"blur",blurDataURL:"/ph.png",priority:!0})})}),(0,l.jsxs)("div",{className:"texts",children:[x&&s.sku&&(0,l.jsx)("p",{className:"p-sku",children:s.sku}),n&&(0,l.jsx)(j(),{href:T||"#",children:(0,l.jsx)("p",{className:"p-name",children:s.name})}),g&&(0,l.jsx)("p",{className:"p-desc",children:(0,l.jsx)("small",{children:s.shortDesc})}),b&&(0,l.jsx)("p",{className:"p-desc",children:(0,l.jsx)("small",{children:s.gen})}),C&&(0,l.jsx)("div",{className:"p-tags",children:"110"===P?(0,l.jsxs)("span",{style:{background:"grey"},children:[(0,l.jsx)(o.Z,{}),"No disponible"]}):(0,l.jsxs)("span",{style:{background:"#54ac45"},children:[(0,l.jsx)(a.Z,{}),"Disponible"]})}),S&&(0,l.jsxs)("a",{className:"p-download-button",href:s.downloads,target:"_blank",rel:"noreferrer",children:[(0,l.jsx)(i.Z,{}),"Descargas"]}),N&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{className:"options-menu",onClick:toggleMenu,children:["Opciones",(0,l.jsx)(d.Z,{})]}),(0,l.jsxs)(p.Z,{anchorEl:O,open:B,onClose:toggleMenu,sx:{maxWidth:"300px"},children:[(0,l.jsx)(f.Z,{onClick:toggleMenu,sx:{fontSize:"14px"},children:(0,l.jsxs)(j(),{className:"search-menu-link",href:s.link,children:[(0,l.jsx)(t.Z,{fontSize:"small"}),"Ver producto"]})}),s.buyLink&&(0,l.jsx)(f.Z,{onClick:toggleMenu,sx:{fontSize:"14px"},children:(0,l.jsxs)(j(),{className:"search-menu-link",target:"_blank",href:s.buyLink,children:[(0,l.jsx)(u.Z,{fontSize:"small"}),"Comprar"]})}),s.features&&(0,l.jsx)(f.Z,{onClick:toggleMenu,sx:{fontSize:"14px"},children:(0,l.jsxs)(j(),{className:"search-menu-link",href:"".concat(s.link),children:[(0,l.jsx)(r.Z,{fontSize:"small"}),"Caracter\xedsticas"]})}),s.downloads&&(0,l.jsx)(f.Z,{onClick:toggleMenu,sx:{fontSize:"14px"},children:(0,l.jsxs)(j(),{className:"search-menu-link",href:s.downloads,target:"_blank",children:[(0,l.jsx)(c.Z,{fontSize:"small"}),"Descargas"]})})]})]})]}),k&&(0,l.jsx)("button",{className:"see-more",children:(0,l.jsx)(j(),{href:"/productos/".concat(s.sku),children:"Ver m\xe1s"})})]})})}},4318:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return Buscar}});var l=n(5893),t=n(7294),a=n(947),o=n(5079),i=n(2297),r=n(2416),c=n(1877),u=n(5158),d=n(8141),h=n(7169),f=n(788),p=n(5084);function SearchContainer(){let[e,s]=(0,t.useState)([]),[n,x]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[j,k]=(0,t.useState)(""),[b,C]=(0,t.useState)(!1),[S,N]=(0,t.useState)(!1),[w,Z]=(0,t.useState)(!0),[v,T]=(0,t.useState)(""),[y,_]=(0,t.useState)([]),[E,P]=(0,t.useState)([]),[D,M]=(0,t.useState)([{id:"headsets",name:"Headsets"},{id:"audio",name:"Audio"},{id:"notebooks",name:"Notebooks"},{id:"tablets",name:"Tablets"},{id:"cooks",name:"Cooks"}]),[z,A]=(0,t.useState)([]),[O,V]=(0,t.useState)([]),[B,L]=(0,t.useState)(!1),[q,F]=(0,t.useState)([]),[I,W]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let fetchProducts=async()=>{try{let e=await Promise.all(["headsets","audio","notebooks","tablets","cooks"].map(async e=>{let s=a.db.collection(e),n=await s.get();return n.docs.map(e=>({id:e.id,...e.data()}))})),n=e.flat();s(n),L(!0)}catch(e){console.error("Error fetching products:",e)}};fetchProducts()},[]),(0,t.useEffect)(()=>{if(e&&b){let s=e.filter(e=>e.secondCategories&&e.secondCategories.includes(110));A(s),V(s)}},[e,b]);let handleCollectionChange=e=>{P(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]),scrollToTop()},R=e;function sortAlphabetically(e,s){return s?e.sort((e,n)=>e[s]>=n[[s]]?1:-1):e.sort((e,s)=>e>=s?1:-1)}function removeDuplicates(e){return Array.from(new Set(e))}function getPossibleSkus(e){return e.map(e=>e.sku)}if(E.length>0&&(R=R.filter(e=>e&&e.collections&&e.collections.some(e=>E.includes(e)))),n){R=function(e,s){let n=o.gD.map(s=>s.parent==e&&s.id);return s.filter(e=>e.categories.some(e=>n.some(s=>s==e)))}(n,e);let s=features.filter(e=>R.some(s=>s.features.some(s=>s.id==e.id&&!e.hideInSearchPage)));if(finalFeatures=removeDuplicates(sortAlphabetically(s,"name")),m){let e=[];R.forEach(s=>{let n=s.features.find(e=>e.id==m);n&&e.push(n.value)}),finalValues=removeDuplicates(sortAlphabetically(e)),j&&(R=R.filter(e=>e.features.some(e=>e.id==m&&e.value==j)))}}else R=e;function changeSku(e){let s=e.target.value;T(s.toUpperCase())}b||(R=R.filter(e=>{let s=Array.isArray(e.categories)?e.categories:[e.categories];return!s.includes(110)})),v&&(R=R.filter(e=>e.sku.includes(v))),y.length>0&&(R=R.filter(e=>e.collections.some(e=>y.includes(e))));let scrollToTop=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(0,t.useEffect)(()=>{window.addEventListener("scroll",()=>{window.pageYOffset>300?N(!0):N(!1)})},[]),(0,l.jsxs)("main",{className:"search",children:[(0,l.jsxs)("aside",{className:"filters",children:[(0,l.jsx)("button",{className:"mobile-open ".concat(w&&"open"),onClick:function(){Z(e=>!e),scrollToTop()},children:(0,l.jsx)(d.Z,{})}),(0,l.jsxs)("div",{className:"wrapper ".concat(w&&"open"),children:[(0,l.jsx)("h1",{children:"B\xfasqueda de productos"}),(0,l.jsx)(r.Z,{children:D.map(e=>(0,l.jsx)(c.Z,{control:(0,l.jsx)(u.Z,{checked:E.includes(e.id),onChange:()=>handleCollectionChange(e.id)}),label:e.name},e.id))}),(0,l.jsx)(f.Z,{disablePortal:!0,id:"sku-input",options:getPossibleSkus(R),fullWidth:!0,disableClearable:!0,onSelect:changeSku,value:v,isOptionEqualToValue:(e,s)=>!0,renderInput:e=>(0,l.jsx)(h.Z,{...e,onChange:changeSku,label:"Modelo"}),filterOptions:(e,s)=>{let{inputValue:n}=s;return e.filter(e=>{let s=R.find(s=>s.sku===e);return s&&s.selectedCollection&&E.includes(s.selectedCollection)&&(!s.secondCategories||!s.secondCategories.includes(110))})}}),(0,l.jsx)(r.Z,{children:(0,l.jsx)(c.Z,{control:(0,l.jsx)(u.Z,{checked:b,onChange:function(){C(e=>!e),scrollToTop()}}),label:"Mostrar descontinuados"})}),b&&O.length>0&&(0,l.jsx)(f.Z,{disablePortal:!0,id:"discontinued-sku-input",options:getPossibleSkus(O),fullWidth:!0,disableClearable:!0,onSelect:changeSku,value:v,isOptionEqualToValue:(e,s)=>!0,renderInput:e=>(0,l.jsx)(h.Z,{...e,onChange:changeSku,label:"Modelo"}),filterOptions:(e,s)=>{let{inputValue:n}=s;return e.filter(e=>{let s=O.find(s=>s.sku===e);return s&&s.secondCategories&&s.secondCategories.includes(110)&&E.includes(s.selectedCollection)})}}),(0,l.jsxs)("button",{className:"back-to-top ".concat(S&&"visible"),onClick:scrollToTop,value:"",children:[(0,l.jsx)(d.Z,{fontSize:"small"}),"Volver arriba"]})]}),(0,l.jsx)(p.Z,{variant:"contained",onClick:()=>{W(!0);let e=R.filter(e=>E.includes(e.selectedCollection)&&(b||!e.secondCategories||!e.secondCategories.includes(110)));F(e)},children:"Aplicar"})]}),(0,l.jsxs)("div",{className:"products",children:[(0,l.jsxs)("p",{className:"results",children:["Resultados: ",I?q.length:R.length]}),I&&0===q.length&&(0,l.jsx)("p",{children:"No hay resultados con los filtros seleccionados."}),(I?q:R).map((e,s)=>e.published?(0,l.jsx)(i.Z,{product:e,showName:!0,showSku:!0,showTags:!0,showDesc:!0,showGen:!0,showDownload:!0,showMenu:!0,showButton:!0},s):null)]})]})}function Buscar(){return(0,l.jsx)(SearchContainer,{})}}},function(e){e.O(0,[662,128,102,777,334,774,888,179],function(){return e(e.s=8210)}),_N_E=e.O()}]);